# rc-dock-extended
Additional features on top of the [`rc-dock`](https://github.com/ticlo/rc-dock) library.

```jsx
import React from 'react';
import DockLayoutExtended from 'rc-dock-extended';

export default function App() {
  return (
    <DockLayoutExtended />
  );
}
```

- [Core features](#core-features)
- [Key differences](#key-differences)
- [Installation](#installation)
- [Usage](#usage)
- [License](#license)

## Core features
- Tab data schema hashtables for templating React components.
- Panel state management to indicate which panel is currently active
  - For comparison, click on any tab panel in [the `flexlayout-react` demo](https://rawgit.com/caplin/FlexLayout/demos/demos/v0.30/demo/index.html). See how the panel title bar changes color?
- _(in progress)_ Tab maximize-minimize layout.
- _(in progress)_ Partial support for creating layouts in new windows as controlled by this component.
  - Full implementations will be provided in the form of recipes.
- ...and, of course, the majority of the APIs from `rc-dock` (with minute key differences [below](#key-differences)).

## Key differences
On top of offering convenience methods, this extension also attempts to make some aspects of `rc-dock` behave a little closer to what is commonly found in other libraries. In doing so, some core ideas have to be encapsulated from you.

- The `layout`, `defaultLayout`, `loadTab()` props in `<DockLayout>` has been simplified.
  - In order to achieve type parity with `layout`, the `defaultLayout` prop now uses the simpler `LayoutBase` type.
  - The `loadTab()` method prop is no longer required by `defaultLayout`.
- 

## Installation
This library is lists `rc-dock` as a peer dependency -- it isn't standalone. It was designed this way so that you can handpick and consume `rc-dock`'s APIs according to your needs. You'll need to install `rc-dock` along with `rc-dock-extended`.

**NPM**
```sh
npm install --save rc-dock
npm install --save rc-dock-extended
```

**Yarn**
```sh
yarn add rc-dock
yarn add rc-dock-extended
```

## Usage
In this small example app:
- There are 5 tabs.
- The 2nd tab is currently active.
- The tab contents are generated by 2 kinds of component templates declared **once**.
- The tabs are identified internally through a combination of `COMPONENT_KEY_NAME`, `#`, `TAB_UUID`, in that order such that it will form tab ids such as `"TESTING#123`.
- The layout is autocontrolled by the library.
- The active panel is colored in red.

**./components/FirstTestComponent.tsx**
```tsx
import React, { FunctionComponent } from 'react';

export const KEY: string = 'FIRST';

export type FirstTestComponentProps = {
  tabId?: string;
};

export const FirstTestComponent: FunctionComponent<FirstTestComponentProps> = ({ tabId }) => {
  return (
    <div>
      <div>First template content:</div>
      {tabId}
    </div>
  );
};
```

**./components/SecondTestComponent.tsx**
```tsx
import React, { FunctionComponent } from 'react';

export const KEY: string = 'SECOND';

export type SecondTestComponentProps = {
  tabId?: string;
};

export const SecondTestComponent: FunctionComponent<SecondTestComponentProps> = ({ tabId }) => {
  return (
    <div>
      <div>Second template content:</div>
      {tabId}
    </div>
  );
};
```

**./App.tsx**
```tsx
import React, { CSSProperties, FunctionComponent } from 'react';

import 'rc-dock/dist/rc-dock.css';

import { TabData, TabGroup } from 'rc-dock';
import { DockLayoutExtended, Lookup, LAYOUT_ID_PREFIX, LAYOUT_TAB_DATA_SCHEMA_ID_PREFIX } from 'rc-dock-extended';

import './App.css';

import { FirstTestComponent, KEY as FIRST } from './components/FirstTestComponent';
import { SecondTestComponent, KEY as SECOND } from './components/SecondTestComponent';

const tabDataSchema: Lookup<TabData> = {
  [FIRST]: {
    title: 'First',
    group: 'testGroup',
    content: (tabData) => {
      return (
        <FirstTestComponent tabId={tabData.id} />
      );
    },
  },
  [SECOND]: {
    title: 'Second',
    group: 'testGroup',
    content: (tabData) => {
      return (
        <SecondTestComponent tabId={tabData.id} />
      );
    },
  },
};

const tabGroupSchema: Lookup<TabGroup> = {
  testGroup: {
    floatable: true,
    panelExtra: (panelData, dockContext) => {
      return (
        <div>
          Panel {panelData.id}
        </div>
      );
    },
  },
};

const App: FunctionComponent = () => {
  const appStyle: CSSProperties = {
    display: 'block',
    height: '100%',
  };

  const layoutStyle: CSSProperties = {
    position: 'absolute',
    left: 10,
    right: 10,
    top: 10,
    bottom: 10,
  };

  return (
    <div className="app" style={appStyle}>
      <DockLayoutExtended
        groups={tabGroupSchema}
        tabDataSchema={tabDataSchema}
        style={layoutStyle}
        defaultActivePanelId={`${LAYOUT_ID_PREFIX}${0}`}
        defaultLayout={{
          dockbox: {
            id: `${LAYOUT_ID_PREFIX}${1}`,
            mode: 'horizontal',
            children: [
              {
                id: `${LAYOUT_ID_PREFIX}${0}`,
                activeId: `${FIRST}${LAYOUT_TAB_DATA_SCHEMA_ID_PREFIX}${2}`, // 'FIRST#2'
                tabs: [
                  {
                    id: `${SECOND}${LAYOUT_TAB_DATA_SCHEMA_ID_PREFIX}${1}`, // 'SECOND#1'
                  },
                  {
                    id: `${FIRST}${LAYOUT_TAB_DATA_SCHEMA_ID_PREFIX}${2}`, // 'FIRST#2'
                  },
                  {
                    id: `${FIRST}${LAYOUT_TAB_DATA_SCHEMA_ID_PREFIX}${3}`, // 'FIRST#3'
                  },
                  {
                    id: `${FIRST}${LAYOUT_TAB_DATA_SCHEMA_ID_PREFIX}${4}`, // 'FIRST#4'
                  },
                  {
                    id: `${SECOND}${LAYOUT_TAB_DATA_SCHEMA_ID_PREFIX}${5}`, // 'SECOND#5'
                  },
                ],
              },
            ],
          },
          floatbox: {
            id: `${LAYOUT_ID_PREFIX}${2}`,
            mode: 'float',
            children: [
            ],
          },
        }}
      />
    </div>
  );
};
```

**./App.css**
```css
.app {
  display: block;
  height: 100%;
}

.dock-panel--active {
  background-color: red !important;
}
```

## License

_See: [LICENSE](LICENSE)_

Apache 2.0.
